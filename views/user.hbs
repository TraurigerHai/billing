<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <link type="image/x-icon" href="/img/favicon.svg" rel="shortcut icon">
    <link type="Image/x-icon" href="/img/favicon.svg" rel="icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
    <title>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</title>
</head>

<body>
    <div class="main-container">
        <header class="header">
            <nav class="menu">
                <div class="menu-item">
                    <a href="/main">
                        <div class="menu-icon">‚åÇ</div>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </a>
                </div>
                <div class="menu-item">
                    <a href="/contract">
                        <div class="menu-icon">üìÑ</div>
                        <span>–î–æ–≥–æ–≤–æ—Ä—ã</span>
                    </a>
                </div>
                <div class="menu-item">
                    <a href="/search">
                        <div class="menu-icon">üîç</div>
                        <span>–ü–æ–∏—Å–∫</span>
                    </a>
                </div>
                <div class="menu-item">
                    <a href="/server">
                        <div class="menu-icon">‚öôÔ∏è</div>
                        <span>–°–µ—Ä–≤–µ—Ä</span>
                    </a>
                </div>
                <div class="menu-item active">
                    <a href="/user">
                        <div class="menu-icon">üë§</div>
                        <span>{{username}}</span>
                    </a>
                </div>
            </nav>
        </header>

        <main class="content">
            <div class="main-grid">
                <section class="summary-section">
                    <div class="section-header">
                        <div class="header-icon">üë§</div>
                        <h2>{{username}}</h2>
                    </div>
                    <div class="navigation-cards">
                        <a href="/user?section=1" 
                           class="summary-card {{#if (eq activeSection '1')}}active{{/if}}">
                            <div class="card-icon">üë§</div>
                            <div class="card-content">
                                <p>–ü—Ä–æ—Ñ–∏–ª—å</p>
                            </div>
                        </a>
                        {{#if isAdmin}}
                        <a href="/user?section=2" 
                           class="summary-card {{#if (eq activeSection '2')}}active{{/if}}">
                            <div class="card-icon">üîî</div>
                            <div class="card-content">
                                <p>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
                            </div>
                        </a>
                        <a href="/user?section=3" 
                           class="summary-card {{#if (eq activeSection '3')}}active{{/if}}">
                            <div class="card-icon">üë•</div>
                            <div class="card-content">
                                <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</p>
                            </div>
                        </a>
                        {{/if}}
                    </div>
                </section>

                <section class="notifications-section">
                    {{#if (eq activeSection '1')}}
                    <div class="section-header">
                        <div class="card-icon">üë§</div>
                        <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    </div>
                    <div class="form-card">
                        <div class="user-info">
                            <div class="info-row">
                                <span class="info-label">–õ–æ–≥–∏–Ω:</span>
                                <span class="info-value">{{username}}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">–¢–∏–ø —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏:</span>
                                <span class="info-value">
                                    {{#if (eq status "base")}}–ë–∞–∑–æ–≤–∞—è{{/if}}
                                    {{#if (eq status "base_plus")}}–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è{{/if}}
                                    {{#if (eq status "base_pro")}}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä{{/if}}
                                </span>
                            </div>
                            <form action="/logout" method="POST">
                                <button type="submit" class="action-button">–í—ã–π—Ç–∏</button>
                            </form>
                        </div>
                    </div>
                    {{/if}}

                    {{#if (eq activeSection '2')}}
                    {{#if isAdmin}}
                    <div class="section-header">
                        <div class="card-icon">üîî</div>
                        <h2>–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>
                    </div>
                    <div class="form-card">
                        <form action="/create-notification" method="POST" class="notification-form">
                            <div class="form-field">
                                <label class="field-label">–¢–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label>
                                <select name="importance" class="field-input">
                                    <option value="–í–ê–ñ–ù–û!">–í–ê–ñ–ù–û!</option>
                                    <option value="–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</option>
                                </select>
                            </div>
                            <div class="form-field">
                                <label class="field-label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</label>
                                <input type="text" name="content" maxlength="64" required class="field-input">
                            </div>
                            <button type="submit" class="action-button">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </div>
                    {{/if}}
                    {{/if}}

                    {{#if (eq activeSection '3')}}
                    {{#if isAdmin}}
                    <div class="section-header">
                        <div class="card-icon">‚ûï</div>
                        <h2>–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    </div>
                    <div class="form-card">
                        <form action="/create-user" method="POST" class="user-form">
                            <div class="form-field">
                                <label class="field-label">–õ–æ–≥–∏–Ω</label>
                                <input type="text" name="login" required class="field-input">
                            </div>
                            <div class="form-field">
                                <label class="field-label">–ü–∞—Ä–æ–ª—å</label>
                                <input type="password" name="password" required class="field-input">
                            </div>
                            <div class="form-field">
                                <label class="field-label">–¢–∏–ø —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏</label>
                                <select name="status" required class="field-input">
                                    <option value="base">–ë–∞–∑–æ–≤–∞—è</option>
                                    <option value="base_plus">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è</option>
                                    <option value="base_pro">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                                </select>
                            </div>
                            <button type="submit" class="action-button">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </div>

                    <div class="section-header" style="margin-top: 32px;">
                        <div class="card-icon">üë•</div>
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                    </div>

                    <div class="users-grid">
                        {{#each users}}
                        <div class="user-card">
                            <div class="card-content">
                                <div class="user-info">
                                    <span class="user-login">{{this.login}}</span>
                                    <span class="user-type">
                                        {{#if (eq this.status 'base')}}–ë–∞–∑–æ–≤–∞—è{{/if}}
                                        {{#if (eq this.status 'base_plus')}}–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è{{/if}}
                                        {{#if (eq this.status 'base_pro')}}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä{{/if}}
                                    </span>
                                </div>
                                <form action="/delete-user" method="POST">
                                    <input type="hidden" name="id" value="{{this.id}}">
                                    <button type="submit" class="delete-button" 
                                            onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">
                                        –£–¥–∞–ª–∏—Ç—å
                                    </button>
                                </form>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                    {{/if}}
                    {{/if}}
                </section>
            </div>
        </main>
    </div>
</body>

</html>